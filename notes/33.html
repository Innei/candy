<!DOCTYPE html><html><head lang="zh-cn"><meta charSet="UTF-8"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="application-name" content="静之森"/><meta name="apple-mobile-web-app-title" content="静之森"/><meta name="msapplication-tooltip" content="静之森"/><meta name="theme-color" content="#ffc107"/><meta name="msapplication-navbutton-color" content="#ffc107"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-starturl" content="/"/><link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC" rel="stylesheet" type="text/css"/><link href="https://cdn.jsdelivr.net/gh/Innei/zshrc@0.1.1/webfont/OperatorMono.css" rel="stylesheet" type="text/css"/><link rel="shortcut icon" href="/favicon.png"/><link rel="icon" href="/favicon.png"/><link rel="apple-touch-icon" href="/favicon.png"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://innei.ren",
    "logo": "https://innei.ren/custom-icon.svg"
  }</script><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "Innei",
    "url": "https://innei.ren",
    "sameAs": [
      "https://github.com/Innei","https://jq.qq.com/?_wv=1027&k=5t9N0mw","https://twitter.com/_oQuery"
     ]
  }</script><title>剖析某运动软件api - 静之森</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content=" date: 2019-03-08T03:42:00.000Z updated: 2020-09-04T18:03:17.399Z title: 剖析某运动软件api slug: 剖析某运动软件api id: 15 permalink: notes/15 type: Note  这学期学校采用某款外包公司的运动软件来强制性制定运动项目. 名字我不说了. 下面来剖析该软件与服务器之间的交互.分析出他的api是怎么样的 安卓7以下使用packet capture进行抓包. 安卓7以上SSL通信无法正常进行. 这里没图 自己抓.我把我抓到的和post出去的json解释一遍. `json {  &quot;startTime&quot;:1551860831865,  //时间截  &quot;runningSportId&quot;: 18,  // 18对应快走，19对应慢跑，20对应快跑 后来通过某种方式得知 212223也对应 应该是跟学校有关 1 2 3 也是  &quot;studentId&quot;: 47xxx,  // 应该是本人唯一值 } // response start {  &quot;id&quot;: 5457xx,  // 后面的activity id 唯一值  &quot;runningSportId&quot;: 18,  // 快走id  &quot;endRunningSportId&quot;: null,  &quot;studentId&quot;: 47580,  &quot;distance&quot;: null,  &quot;stepCount&quot;: null,  &quot;costTime&quot;: null,  &quot;speed&quot;: null,  &quot;stepPerSecond&quot;: null,  &quot;distancePerStep&quot;: null,  &quot;targetFinishedTime&quot;: null,  &quot;startTime&quot;: 1551860832272,  // 当前服务器时间截(毫秒) 13位  &quot;kcalConsumed&quot;: null,  &quot;qualified&quot;: null,  &quot;isValid&quot;: null,  &quot;isVerified&quot;: null,  &quot;qualifiedDistance&quot;: 4000,  &quot;qualifiedCostTime&quot;: 3360,  &quot;minCostTime&quot;: null,  &quot;endedAt&quot;: null,  &quot;endedBy&quot;: null } // activitydata {  &quot;distancePerStep&quot;: 0.0,  &quot;locationType&quot;: 2,  &quot;stepCountCal&quot;: 0,  &quot;longitude&quot;: 120.xxxx,  &quot;activityId&quot;: 551760,  &quot;latitude&quot;: 27.9xxxxx, //坐标  &quot;stepCount&quot;: 0,  &quot;isNormal&quot;: true,  &quot;distance&quot;: 0,  &quot;stepPerSecond&quot;: 0.0, } // response data {  &quot;statusMsg&quot;: &quot;数据提交成功&quot;,  &quot;obj&quot;: {   &quot;id&quot;: 64822721, // 随机值   &quot;activityId&quot;: 5457xx, // start返回唯一值id   &quot;acquisitionTime&quot;: 1551860832729, //当前服务器时间截(毫秒) 13位   &quot;stepCount&quot;: 0,   &quot;stepCountCal&quot;: 0,   &quot;distance&quot;: 0,   &quot;distancePerStep&quot;: 0.0,   &quot;stepPerSecond&quot;: 0.0,   &quot;longitude&quot;: 120.7071,   &quot;latitude&quot;: 27.916,   &quot;locationType&quot;: 4,   &quot;isNormal&quot;: true  } } // end request {  &quot;targetFinishedTime&quot;:0,  &quot;costTime&quot; :141,  // 秒  &quot;distance&quot;: 0, // 米  &quot;stepCount&quot; :0,  &quot;id&quot;:545712, // 一次运动 唯一值 } // response {  &quot;id&quot;: 545712,  &quot;runningSportId&quot;: 18,  &quot;endRunningSportId&quot;: 18,  &quot;studentId&quot;: 47580,  &quot;distance&quot;: 0,  &quot;stepCount&quot;: 0,  &quot;costTime&quot;: 141,  &quot;speed&quot;: 0.0,  &quot;stepPerSecond&quot;: 0.0,  &quot;distancePerStep&quot;: 0.0,  &quot;targetFinishedTime&quot;: 0,  &quot;startTime&quot;: 1551860832000,  &quot;kcalConsumed&quot;: 4,  &quot;qualified&quot;: false,  &quot;isValid&quot;: true,  &quot;isVerified&quot;: false,  &quot;qualifiedDistance&quot;: 4000,  &quot;qualifiedCostTime&quot;: 3360,  &quot;minCostTime&quot;: 0,  &quot;endedAt&quot;: 1551860975504,  &quot;endedBy&quot;: null } ` 与api的交互包 总体过程: 首先向服务器发送一个start请求,可以看到start的header里有一个Authorization: 后面是JWT加密,通过一个.前面的用base64解密 发现是sha512加密.这里估计是个bug,只要你登陆上去抓到这个Authorization就行了,而且这个不是重点,因为JWT最后一位随便改个大写字母都行.但是这个Authorization不可缺. 确定用户的唯一值是 StudentId 下面看传出的data 首先是有个id 这个id很重要决定了本次运动的id唯一值,只要没有发送end指令,就可以向服务器发送runningactivityData. 然后不停的向服务器发送runningactivityData 这是什么,看看data和回传的json 发现这是实时距离,步数,位置(经纬度)等等 再来看看end 也是这些东西,而且这些东西都可以伪造. 结果取得是end发送的结果. 也就是说前面的runningactivityData只是用来绘制路线而已, 也是判断作弊用的吧 post模拟(v1.0 .路径模拟.) 说干就干 用python 进行模拟 `python import requests import time import json import random from math import radians, cos, sin, asin, sqrt, pow url = &#x27;https://api.guangyangyundong.com/&#x27; millis = int(round(time.time() * 1000))  # 获取时间截 r = requests.session() start_time = int(time.time()) 全局变量 distance = 0 longitude = 120.70645 latitude = 27.917463 lon1 = 120.70645 lat1 = 27.917463 lon2 = 120.70645 lat2 = 27.917463 stepCount = 0 targetFinishedTime = 0 start headers = {     &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Linux; U; Android 5.1; zh-cn; MX4 Build/LMY47I) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36&#x27;,     &#x27;Authorization&#x27;: &#x27;&#x27;,     &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27; } data = {     &#x27;startTime&#x27;: millis,     &#x27;runningSportId&#x27;: 20,  # 跑步模式     &#x27;studentId&#x27;: xxxxx, } js = r.post(url + &#x27;api/runningActivities/start&#x27;,             data=data, headers=headers).content js = json.loads(js) id = js[&quot;id&quot;]  # 获取当前运动id print(id) end activity def end():     global distance, targetFinishedTime, stepCount     time.sleep(random.randint(2, 3))  # 模拟停止动作     endtime = int(time.time()) - starttime  # 间隔时间     end_data = {         &quot;targetFinishedTime&quot;: targetFinishedTime,  # 预测是目标完成时间         &quot;costTime&quot;: end_time,         &quot;distance&quot;: distance,  # 最后一次activity的距离         &quot;stepCount&quot;: stepCount,  # 步数？？         &quot;id&quot;: id,     }     end_running = r.post(url + &#x27;api/runningActivities/end&#x27;,                          data=end_data, headers=headers).content     endrunning = json.loads(endrunning)     print(end_running)     exit(0)  # 退出 def haversine(lon1, lat1, lon2, lat2):  # 经度1，纬度1，经度2，纬度2 （十进制度数）     &quot;&quot;&quot;     Calculate the great circle distance between two points     on the earth (specified in decimal degrees)     &quot;&quot;&quot; 将十进制度数转化为弧度     lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2]) haversine公式     dlon = lon2 - lon1     dlat = lat2 - lat1     a = sin(dlat / 2) * 2 + cos(lat1)  cos(lat2) * sin(dlon / 2) ** 2     c = 2 * asin(sqrt(a))     r = 6371  # 地球平均半径，单位为公里     return c * r * 1000 running activity data post def anti_activity():  # 回走函数     global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime     if distance &gt;= 1000:         targetFinishedTime = int(time.time()) - start_time         end()  # 1000m 结束 计算用时         return     rand = round(random.randint(1, 100) / 100) / 4200   # 引入随机值     lon2 = lon1 + pow(-1, random.randint(0, 1)) * \         round(random.randint(1, 100) / 100) / 1000000  # 左右偏移     lat2 = lat1 - rand     distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离     distance_per = haversine(lon1, lat1, lon2, lat2)     stepCountper = distanceper / 0.6     stepCount = round(distance_per / 0.6 + stepCount)     activity_data = { 每秒走了多少步         &quot;distancePerStep&quot;: round(2.4 - random.randint(10, 60) / 100, 1),         &quot;locationType&quot;: 1,  # 根据高德api 应返回1 为GPS定位         &quot;stepCountCal&quot;: stepCount - random.randint(2, 8),  # 比总步数小一点 未证实         &quot;longitude&quot;: lon1,  # 经纬度         &quot;activityId&quot;: id,  # id唯一值         &quot;latitude&quot;: lat1,         &quot;stepCount&quot;: stepCount,  # 总步数         &quot;isNormal&quot;: &#x27;true&#x27;,  # 未证实         &quot;distance&quot;: distance,  # 距离累加 end应返回最后一个distance 平均速度         &quot;stepPerSecond&quot;: round(3.5 - random.randint(100, 200) / 1000, 1),     }     lon1 = lon2     lat1 = lat2     print(&quot;当前经纬度&quot;, longitude)     print(latitude)     print(&quot;总距离&quot;, distance)     print(&quot;每次位移差&quot;, distance_per)     print(&#x27;总步数&#x27;, stepCount)     print(&quot;每次步数&quot;, stepCount_per)     print(&quot;每秒走多少步&quot;, activity_data[&quot;distancePerStep&quot;])     print(&quot;平均速度&quot;, activity_data[&quot;stepPerSecond&quot;])     log = r.post(url + &#x27;api/runningActivityData&#x27;,                  headers=headers, data=activity_data).content     log = json.loads(log)     print(log)     return def activity():     global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime     if distance &gt;= 600:  # 如果大于630米要转弯 我觉得返回跑比较好 差不多这个点         anti_activity() targetFinishedTime = int(time.time()) - start_time         return     rand = random.randint(1, 100000) / 100000000     lon2 = lon1 + pow(-1, random.randint(0, 1)) * \         round(random.randint(1, 100) / 100) / 1000000  # 左右偏移 # 引入随机值     lat2 = lat1 + rand     distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离     distance_per = haversine(lon1, lat1, lon2, lat2)     stepCountper = distanceper / 0.6     stepCount = round(distance_per / 0.6 + stepCount)     activity_data = { 每秒走了多少步         &quot;distancePerStep&quot;: round(2.4 - random.randint(10, 60) / 100, 1),         &quot;locationType&quot;: 1,  # 根据高德api 应返回1 为GPS定位         &quot;stepCountCal&quot;: stepCount - random.randint(2, 8),  # 比总步数小一点 未证实         &quot;longitude&quot;: lon1,  # 经纬度         &quot;activityId&quot;: id,  # id唯一值         &quot;latitude&quot;: lat1,         &quot;stepCount&quot;: stepCount,  # 总步数         &quot;isNormal&quot;: &#x27;true&#x27;,  # 未证实         &quot;distance&quot;: distance,  # 距离累加 end应返回最后一个distance 平均速度         &quot;stepPerSecond&quot;: round(3.5 - random.randint(100, 200) / 1000, 1),     }     lon1 = lon2     lat1 = lat2     print(&quot;当前经纬度&quot;, longitude)     print(latitude)     print(&quot;总距离&quot;, distance)     print(&quot;每次位移差&quot;, distance_per)     print(&#x27;总步数&#x27;, stepCount)     print(&quot;每次步数&quot;, stepCount_per)     print(&quot;每秒走多少步&quot;, activity_data[&quot;distancePerStep&quot;])     log = r.post(url + &#x27;api/runningActivityData&#x27;,                  headers=headers, data=activity_data).content     log = json.loads(log)     print(log) n = 0 while n &lt; 90:     activity()     n = n + 1     rand_time = random.randint(300, 400) / 100     print(&#x27;sleep &#x27;, rand_time, &#x27; s\n&#x27;)     time.sleep(rand_time)  # 睡眠然后再次提交数据 end() ` 希望有大佬可以进行完善,等等我会在github开源 希望有交流讨论 后续研究 该api存在严重漏洞. 比如可以根据studentId获取到任意学生的运动数据,不需要传入header. 然后根据id能获取每次运动路径 比如 `json id = 544237 {   &quot;errors&quot;: [],   &quot;data&quot;: {     &quot;runningActivity&quot;: {       &quot;distance&quot;: 1711,       &quot;costTime&quot;: 2312,       &quot;endedAt&quot;: 1551893421000,       &quot;qualifiedDistance&quot;: 800,       &quot;qualifiedCostTime&quot;: 300,       &quot;kcalConsumed&quot;: 387,       &quot;qualified&quot;: false,       &quot;isValid&quot;: true,       &quot;isVerified&quot;: true,       &quot;runningSport&quot;: {         &quot;name&quot;: &quot;快跑&quot;       },       &quot;data&quot;: [         {           &quot;longitude&quot;: 120.701575,           &quot;latitude&quot;: 27.921444,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 5,           &quot;stepCount&quot;: 0,           &quot;distance&quot;: 0,           &quot;acquisitionTime&quot;: 1551850108         },         {           &quot;longitude&quot;: 120.70023546006945,           &quot;latitude&quot;: 27.91632161458333,           &quot;isNormal&quot;: false,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 0,           &quot;distance&quot;: 0,           &quot;acquisitionTime&quot;: 1551850112         },         {           &quot;longitude&quot;: 120.70006863064236,           &quot;latitude&quot;: 27.91600802951389,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 38,           &quot;acquisitionTime&quot;: 1551850116         },         {           &quot;longitude&quot;: 120.6999134657118,           &quot;latitude&quot;: 27.915694444444444,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 76,           &quot;acquisitionTime&quot;: 1551850120         },         {           &quot;longitude&quot;: 120.69976318359375,           &quot;latitude&quot;: 27.91541232638889,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 110,           &quot;acquisitionTime&quot;: 1551850124         },         {           &quot;longitude&quot;: 120.69963433159722,           &quot;latitude&quot;: 27.915142415364585,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 142,           &quot;acquisitionTime&quot;: 1551850128         },   ...... ` 当然其他学校数据也能看. 同理"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="https://innei.ren"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-09-05T11:07:21.263Z"/><meta property="article:modified_time" content="2020-09-05T11:06:28.000Z"/><meta property="article:author" content="Innei"/><meta property="article:tag" content="Note of Life"/><meta property="og:title" content="剖析某运动软件api"/><meta property="og:description" content=" date: 2019-03-08T03:42:00.000Z updated: 2020-09-04T18:03:17.399Z title: 剖析某运动软件api slug: 剖析某运动软件api id: 15 permalink: notes/15 type: Note  这学期学校采用某款外包公司的运动软件来强制性制定运动项目. 名字我不说了. 下面来剖析该软件与服务器之间的交互.分析出他的api是怎么样的 安卓7以下使用packet capture进行抓包. 安卓7以上SSL通信无法正常进行. 这里没图 自己抓.我把我抓到的和post出去的json解释一遍. `json {  &quot;startTime&quot;:1551860831865,  //时间截  &quot;runningSportId&quot;: 18,  // 18对应快走，19对应慢跑，20对应快跑 后来通过某种方式得知 212223也对应 应该是跟学校有关 1 2 3 也是  &quot;studentId&quot;: 47xxx,  // 应该是本人唯一值 } // response start {  &quot;id&quot;: 5457xx,  // 后面的activity id 唯一值  &quot;runningSportId&quot;: 18,  // 快走id  &quot;endRunningSportId&quot;: null,  &quot;studentId&quot;: 47580,  &quot;distance&quot;: null,  &quot;stepCount&quot;: null,  &quot;costTime&quot;: null,  &quot;speed&quot;: null,  &quot;stepPerSecond&quot;: null,  &quot;distancePerStep&quot;: null,  &quot;targetFinishedTime&quot;: null,  &quot;startTime&quot;: 1551860832272,  // 当前服务器时间截(毫秒) 13位  &quot;kcalConsumed&quot;: null,  &quot;qualified&quot;: null,  &quot;isValid&quot;: null,  &quot;isVerified&quot;: null,  &quot;qualifiedDistance&quot;: 4000,  &quot;qualifiedCostTime&quot;: 3360,  &quot;minCostTime&quot;: null,  &quot;endedAt&quot;: null,  &quot;endedBy&quot;: null } // activitydata {  &quot;distancePerStep&quot;: 0.0,  &quot;locationType&quot;: 2,  &quot;stepCountCal&quot;: 0,  &quot;longitude&quot;: 120.xxxx,  &quot;activityId&quot;: 551760,  &quot;latitude&quot;: 27.9xxxxx, //坐标  &quot;stepCount&quot;: 0,  &quot;isNormal&quot;: true,  &quot;distance&quot;: 0,  &quot;stepPerSecond&quot;: 0.0, } // response data {  &quot;statusMsg&quot;: &quot;数据提交成功&quot;,  &quot;obj&quot;: {   &quot;id&quot;: 64822721, // 随机值   &quot;activityId&quot;: 5457xx, // start返回唯一值id   &quot;acquisitionTime&quot;: 1551860832729, //当前服务器时间截(毫秒) 13位   &quot;stepCount&quot;: 0,   &quot;stepCountCal&quot;: 0,   &quot;distance&quot;: 0,   &quot;distancePerStep&quot;: 0.0,   &quot;stepPerSecond&quot;: 0.0,   &quot;longitude&quot;: 120.7071,   &quot;latitude&quot;: 27.916,   &quot;locationType&quot;: 4,   &quot;isNormal&quot;: true  } } // end request {  &quot;targetFinishedTime&quot;:0,  &quot;costTime&quot; :141,  // 秒  &quot;distance&quot;: 0, // 米  &quot;stepCount&quot; :0,  &quot;id&quot;:545712, // 一次运动 唯一值 } // response {  &quot;id&quot;: 545712,  &quot;runningSportId&quot;: 18,  &quot;endRunningSportId&quot;: 18,  &quot;studentId&quot;: 47580,  &quot;distance&quot;: 0,  &quot;stepCount&quot;: 0,  &quot;costTime&quot;: 141,  &quot;speed&quot;: 0.0,  &quot;stepPerSecond&quot;: 0.0,  &quot;distancePerStep&quot;: 0.0,  &quot;targetFinishedTime&quot;: 0,  &quot;startTime&quot;: 1551860832000,  &quot;kcalConsumed&quot;: 4,  &quot;qualified&quot;: false,  &quot;isValid&quot;: true,  &quot;isVerified&quot;: false,  &quot;qualifiedDistance&quot;: 4000,  &quot;qualifiedCostTime&quot;: 3360,  &quot;minCostTime&quot;: 0,  &quot;endedAt&quot;: 1551860975504,  &quot;endedBy&quot;: null } ` 与api的交互包 总体过程: 首先向服务器发送一个start请求,可以看到start的header里有一个Authorization: 后面是JWT加密,通过一个.前面的用base64解密 发现是sha512加密.这里估计是个bug,只要你登陆上去抓到这个Authorization就行了,而且这个不是重点,因为JWT最后一位随便改个大写字母都行.但是这个Authorization不可缺. 确定用户的唯一值是 StudentId 下面看传出的data 首先是有个id 这个id很重要决定了本次运动的id唯一值,只要没有发送end指令,就可以向服务器发送runningactivityData. 然后不停的向服务器发送runningactivityData 这是什么,看看data和回传的json 发现这是实时距离,步数,位置(经纬度)等等 再来看看end 也是这些东西,而且这些东西都可以伪造. 结果取得是end发送的结果. 也就是说前面的runningactivityData只是用来绘制路线而已, 也是判断作弊用的吧 post模拟(v1.0 .路径模拟.) 说干就干 用python 进行模拟 `python import requests import time import json import random from math import radians, cos, sin, asin, sqrt, pow url = &#x27;https://api.guangyangyundong.com/&#x27; millis = int(round(time.time() * 1000))  # 获取时间截 r = requests.session() start_time = int(time.time()) 全局变量 distance = 0 longitude = 120.70645 latitude = 27.917463 lon1 = 120.70645 lat1 = 27.917463 lon2 = 120.70645 lat2 = 27.917463 stepCount = 0 targetFinishedTime = 0 start headers = {     &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Linux; U; Android 5.1; zh-cn; MX4 Build/LMY47I) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36&#x27;,     &#x27;Authorization&#x27;: &#x27;&#x27;,     &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27; } data = {     &#x27;startTime&#x27;: millis,     &#x27;runningSportId&#x27;: 20,  # 跑步模式     &#x27;studentId&#x27;: xxxxx, } js = r.post(url + &#x27;api/runningActivities/start&#x27;,             data=data, headers=headers).content js = json.loads(js) id = js[&quot;id&quot;]  # 获取当前运动id print(id) end activity def end():     global distance, targetFinishedTime, stepCount     time.sleep(random.randint(2, 3))  # 模拟停止动作     endtime = int(time.time()) - starttime  # 间隔时间     end_data = {         &quot;targetFinishedTime&quot;: targetFinishedTime,  # 预测是目标完成时间         &quot;costTime&quot;: end_time,         &quot;distance&quot;: distance,  # 最后一次activity的距离         &quot;stepCount&quot;: stepCount,  # 步数？？         &quot;id&quot;: id,     }     end_running = r.post(url + &#x27;api/runningActivities/end&#x27;,                          data=end_data, headers=headers).content     endrunning = json.loads(endrunning)     print(end_running)     exit(0)  # 退出 def haversine(lon1, lat1, lon2, lat2):  # 经度1，纬度1，经度2，纬度2 （十进制度数）     &quot;&quot;&quot;     Calculate the great circle distance between two points     on the earth (specified in decimal degrees)     &quot;&quot;&quot; 将十进制度数转化为弧度     lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2]) haversine公式     dlon = lon2 - lon1     dlat = lat2 - lat1     a = sin(dlat / 2) * 2 + cos(lat1)  cos(lat2) * sin(dlon / 2) ** 2     c = 2 * asin(sqrt(a))     r = 6371  # 地球平均半径，单位为公里     return c * r * 1000 running activity data post def anti_activity():  # 回走函数     global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime     if distance &gt;= 1000:         targetFinishedTime = int(time.time()) - start_time         end()  # 1000m 结束 计算用时         return     rand = round(random.randint(1, 100) / 100) / 4200   # 引入随机值     lon2 = lon1 + pow(-1, random.randint(0, 1)) * \         round(random.randint(1, 100) / 100) / 1000000  # 左右偏移     lat2 = lat1 - rand     distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离     distance_per = haversine(lon1, lat1, lon2, lat2)     stepCountper = distanceper / 0.6     stepCount = round(distance_per / 0.6 + stepCount)     activity_data = { 每秒走了多少步         &quot;distancePerStep&quot;: round(2.4 - random.randint(10, 60) / 100, 1),         &quot;locationType&quot;: 1,  # 根据高德api 应返回1 为GPS定位         &quot;stepCountCal&quot;: stepCount - random.randint(2, 8),  # 比总步数小一点 未证实         &quot;longitude&quot;: lon1,  # 经纬度         &quot;activityId&quot;: id,  # id唯一值         &quot;latitude&quot;: lat1,         &quot;stepCount&quot;: stepCount,  # 总步数         &quot;isNormal&quot;: &#x27;true&#x27;,  # 未证实         &quot;distance&quot;: distance,  # 距离累加 end应返回最后一个distance 平均速度         &quot;stepPerSecond&quot;: round(3.5 - random.randint(100, 200) / 1000, 1),     }     lon1 = lon2     lat1 = lat2     print(&quot;当前经纬度&quot;, longitude)     print(latitude)     print(&quot;总距离&quot;, distance)     print(&quot;每次位移差&quot;, distance_per)     print(&#x27;总步数&#x27;, stepCount)     print(&quot;每次步数&quot;, stepCount_per)     print(&quot;每秒走多少步&quot;, activity_data[&quot;distancePerStep&quot;])     print(&quot;平均速度&quot;, activity_data[&quot;stepPerSecond&quot;])     log = r.post(url + &#x27;api/runningActivityData&#x27;,                  headers=headers, data=activity_data).content     log = json.loads(log)     print(log)     return def activity():     global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime     if distance &gt;= 600:  # 如果大于630米要转弯 我觉得返回跑比较好 差不多这个点         anti_activity() targetFinishedTime = int(time.time()) - start_time         return     rand = random.randint(1, 100000) / 100000000     lon2 = lon1 + pow(-1, random.randint(0, 1)) * \         round(random.randint(1, 100) / 100) / 1000000  # 左右偏移 # 引入随机值     lat2 = lat1 + rand     distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离     distance_per = haversine(lon1, lat1, lon2, lat2)     stepCountper = distanceper / 0.6     stepCount = round(distance_per / 0.6 + stepCount)     activity_data = { 每秒走了多少步         &quot;distancePerStep&quot;: round(2.4 - random.randint(10, 60) / 100, 1),         &quot;locationType&quot;: 1,  # 根据高德api 应返回1 为GPS定位         &quot;stepCountCal&quot;: stepCount - random.randint(2, 8),  # 比总步数小一点 未证实         &quot;longitude&quot;: lon1,  # 经纬度         &quot;activityId&quot;: id,  # id唯一值         &quot;latitude&quot;: lat1,         &quot;stepCount&quot;: stepCount,  # 总步数         &quot;isNormal&quot;: &#x27;true&#x27;,  # 未证实         &quot;distance&quot;: distance,  # 距离累加 end应返回最后一个distance 平均速度         &quot;stepPerSecond&quot;: round(3.5 - random.randint(100, 200) / 1000, 1),     }     lon1 = lon2     lat1 = lat2     print(&quot;当前经纬度&quot;, longitude)     print(latitude)     print(&quot;总距离&quot;, distance)     print(&quot;每次位移差&quot;, distance_per)     print(&#x27;总步数&#x27;, stepCount)     print(&quot;每次步数&quot;, stepCount_per)     print(&quot;每秒走多少步&quot;, activity_data[&quot;distancePerStep&quot;])     log = r.post(url + &#x27;api/runningActivityData&#x27;,                  headers=headers, data=activity_data).content     log = json.loads(log)     print(log) n = 0 while n &lt; 90:     activity()     n = n + 1     rand_time = random.randint(300, 400) / 100     print(&#x27;sleep &#x27;, rand_time, &#x27; s\n&#x27;)     time.sleep(rand_time)  # 睡眠然后再次提交数据 end() ` 希望有大佬可以进行完善,等等我会在github开源 希望有交流讨论 后续研究 该api存在严重漏洞. 比如可以根据studentId获取到任意学生的运动数据,不需要传入header. 然后根据id能获取每次运动路径 比如 `json id = 544237 {   &quot;errors&quot;: [],   &quot;data&quot;: {     &quot;runningActivity&quot;: {       &quot;distance&quot;: 1711,       &quot;costTime&quot;: 2312,       &quot;endedAt&quot;: 1551893421000,       &quot;qualifiedDistance&quot;: 800,       &quot;qualifiedCostTime&quot;: 300,       &quot;kcalConsumed&quot;: 387,       &quot;qualified&quot;: false,       &quot;isValid&quot;: true,       &quot;isVerified&quot;: true,       &quot;runningSport&quot;: {         &quot;name&quot;: &quot;快跑&quot;       },       &quot;data&quot;: [         {           &quot;longitude&quot;: 120.701575,           &quot;latitude&quot;: 27.921444,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 5,           &quot;stepCount&quot;: 0,           &quot;distance&quot;: 0,           &quot;acquisitionTime&quot;: 1551850108         },         {           &quot;longitude&quot;: 120.70023546006945,           &quot;latitude&quot;: 27.91632161458333,           &quot;isNormal&quot;: false,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 0,           &quot;distance&quot;: 0,           &quot;acquisitionTime&quot;: 1551850112         },         {           &quot;longitude&quot;: 120.70006863064236,           &quot;latitude&quot;: 27.91600802951389,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 38,           &quot;acquisitionTime&quot;: 1551850116         },         {           &quot;longitude&quot;: 120.6999134657118,           &quot;latitude&quot;: 27.915694444444444,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 76,           &quot;acquisitionTime&quot;: 1551850120         },         {           &quot;longitude&quot;: 120.69976318359375,           &quot;latitude&quot;: 27.91541232638889,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 110,           &quot;acquisitionTime&quot;: 1551850124         },         {           &quot;longitude&quot;: 120.69963433159722,           &quot;latitude&quot;: 27.915142415364585,           &quot;isNormal&quot;: true,           &quot;locationType&quot;: 1,           &quot;stepCount&quot;: 1,           &quot;distance&quot;: 142,           &quot;acquisitionTime&quot;: 1551850128         },   ...... ` 当然其他学校数据也能看. 同理"/><meta property="og:image" content="https://i.loli.net/2020/05/22/EGk4qUvcXDygV2z.jpg"/><meta property="og:image:alt" content="剖析某运动软件api - 静之森"/><meta property="og:locale" content="zh-cn"/><meta property="og:site_name" content="静之森"/><meta name="next-head-count" content="21"/><link rel="preload" href="/_next/static/css/8d9f55ec446e240b4030.css" as="style" crossorigin="anonymous"/><link rel="stylesheet" href="/_next/static/css/8d9f55ec446e240b4030.css" crossorigin="anonymous" data-n-g=""/><link rel="preload" href="/_next/static/css/fedc5677798c6d5f449a.css" as="style" crossorigin="anonymous"/><link rel="stylesheet" href="/_next/static/css/fedc5677798c6d5f449a.css" crossorigin="anonymous" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-d25c3a68f8467af5ab28.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/webpack-9076e9871007db0403b2.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/framework.aa400efa16f23e2b0cfe.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/cb1608f2.df9c02bdeedf5175f4f8.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/a9a7754c.f3b978835b3ded362691.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/8313d723.a205bf63c608c0f1242c.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/commons.218023d92b657c8d646e.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/d8ec773c9d2418ede6b24e343533277017806d20.2027cc3a1671d3e5bebd.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/e16c35cca568c5c1c1120369807cb65d54c417fb.5fafcf9a83652cc0414f.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/34bc5cdf634bd0df45330a36433f02ce9393621f.59d552af12b4825ec2ac.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/e9c859f95a3c7a77a91061f0462124ba9996dc37.761ef6b9b60c2525eaac.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/47560dcdbf5764f7e81ae9e8c3ac154829f9a224.7a7848fdef4b7fa486f3.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/bcbc274c75a7167519c9fd119420b18d997fe2ff.f2b256987406b58a7905.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/71247caf95475e3ea7f9a0f8a30beb258b23d005.71aab1d7f57017e520dd.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/pages/_app-ea4e8133a1256b82b929.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/5875668848b312b64d8db1d1f2167c5d595caeb3.264115b3eafff5e327c9.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/a87edcd543411bc1f9e6ec6d695b8d3cee4671e7.be3de0cadb2da57baaa2.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/c441d36c50190ad41d2c3326fa2cd28c2c74d7c2.b212de07c7bbaa8e7d53.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/23e05689de3ef9ea8c6f6ad01474d620bb59d30a.76f9b523919fa950fbac.module.js" as="script" crossorigin="anonymous"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bid%5D-85b8ed3b7a97f58b7a3f.module.js" as="script" crossorigin="anonymous"/><style id="__jsx-685620294">.head-logo.jsx-685620294{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}header.jsx-685620294{background-color:var(--bg-opacity);-webkit-backdrop-filter:blur(25px) saturate(150%) brightness(1.1);backdrop-filter:blur(25px) saturate(150%) brightness(1.1);z-index:5;-webkit-transition:-webkit-transform 0.5s,backdrop-filter 0.5s;-webkit-transition:transform 0.5s,backdrop-filter 0.5s;transition:transform 0.5s,backdrop-filter 0.5s;}header.hide.jsx-685620294{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%);}@media screen and (max-width:600px){.head-logo.jsx-685620294{display:block;}}html.dark.jsx-685620294 header.jsx-685620294{-webkit-backdrop-filter:saturate(150%) blur(30px);backdrop-filter:saturate(150%) blur(30px);}</style><style id="__jsx-2343023712">.row.jsx-2343023712{padding-bottom:18px;}</style><style id="__jsx-1525261419">.loader svg{top:50%;left:50%;opacity:0;z-index:100;height:8em;color:#fff;position:fixed;visibility:hidden;-webkit-transform:translate(-50%,-50%) scale(0);-ms-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0);-webkit-transition:opacity 0.3s, -webkit-transform 0.5s cubic-bezier(0.5,0,0.5,1.5),visibility 0.3s;-webkit-transition:opacity 0.3s, transform 0.5s cubic-bezier(0.5,0,0.5,1.5),visibility 0.3s;transition:opacity 0.3s, transform 0.5s cubic-bezier(0.5,0,0.5,1.5),visibility 0.3s;}.loader:before{top:50%;left:50%;z-index:99;content:'';width:100vmax;height:100vmax;position:fixed;border-radius:50%;background:var(--green);-webkit-transition:-webkit-transform 0.5s ease-in-out;-webkit-transition:transform 0.5s ease-in-out;transition:transform 0.5s ease-in-out;-webkit-transform:translate(-50%,-50%) scale(0);-ms-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0);}body.loading .loader:before{-webkit-transform:translate(-50%,-50%) scale(1.5);-ms-transform:translate(-50%,-50%) scale(1.5);transform:translate(-50%,-50%) scale(1.5);}body.loading .loader svg{opacity:1;visibility:visible;-webkit-transform:translate(-50%,-50%) scale(1);-ms-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1);}</style></head><body id="app" class="loading"><div id="__next"><div id="next" style="display:none"><header class="jsx-685620294 "><div class="jsx-685620294 head-logo"><svg viewBox="0 0 200 200" version="1.1"><desc>Created with Sketch.</desc><g id="Custom-Preset" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Group" transform="translate(1.000000, 0.000000)"><g transform="translate(0.891670, 0.001664)" fill-rule="nonzero"><g id="Shape-2" fill="currentColor"><path d="M97.9232558,0 C43.8413297,0 0,43.8413297 0,97.9232558 C0,152.005182 43.8413297,195.846512 97.9232558,195.846512 C152.005182,195.846512 195.846512,152.005182 195.846512,97.9232558 C195.846512,43.8413297 152.005182,0 97.9232558,0 Z M97.9232558,184.96615 C49.8516415,184.96615 10.8803618,145.99487 10.8803618,97.9232558 C10.8803618,49.8516415 49.8516415,10.8803618 97.9232558,10.8803618 C145.99487,10.8803618 184.96615,49.8516415 184.96615,97.9232558 C184.96615,145.99487 145.99487,184.96615 97.9232558,184.96615 Z" id="Shape"></path></g><circle id="Oval" cx="97.9232558" cy="97.9232558" r="78.8162791"></circle></g><g transform="translate(48.391670, 47.501664)" id="Shape" stroke="currentColor" stroke-width="8.8"><path d="M50.1120234,100.116279 L0,50.1120234 L50.1120234,0 L100.116279,50.0042556 L50.1120234,100.116279 Z M90.5813953,57.2093023 L72.7145681,40.3711034 L50.1119553,19.0697674 L9.53488372,57.2093023 M71.5116279,42.9069767 L33.372093,81.0465116 M28.6046512,42.9069767 L66.744186,81.0465116"></path></g></g></g></svg></div><div class="jsx-685620294 Header_head-swiper__37Fg8"><nav class="jsx-685620294 Header_head-info__17tgL"><div class="jsx-685620294 "><div class="jsx-685620294 Header_meta__YYzbP"></div><div class="jsx-685620294 Header_title__EwaWq"></div></div></nav><nav class="jsx-685620294 head-menu Header_head-menu__ofiV5"><div class="menu-link"><a href="/"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="dot-circle" class="svg-inline--fa fa-dot-circle fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm80 248c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80z"></path></svg><span>源</span></a><div class="sub-menu"></div></div><div class="menu-link"><a href="/posts"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="glasses" class="svg-inline--fa fa-glasses fa-w-18 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M574.1 280.37L528.75 98.66c-5.91-23.7-21.59-44.05-43-55.81-21.44-11.73-46.97-14.11-70.19-6.33l-15.25 5.08c-8.39 2.79-12.92 11.86-10.12 20.24l5.06 15.18c2.79 8.38 11.85 12.91 20.23 10.12l13.18-4.39c10.87-3.62 23-3.57 33.16 1.73 10.29 5.37 17.57 14.56 20.37 25.82l38.46 153.82c-22.19-6.81-49.79-12.46-81.2-12.46-34.77 0-73.98 7.02-114.85 26.74h-73.18c-40.87-19.74-80.08-26.75-114.86-26.75-31.42 0-59.02 5.65-81.21 12.46l38.46-153.83c2.79-11.25 10.09-20.45 20.38-25.81 10.16-5.3 22.28-5.35 33.15-1.73l13.17 4.39c8.38 2.79 17.44-1.74 20.23-10.12l5.06-15.18c2.8-8.38-1.73-17.45-10.12-20.24l-15.25-5.08c-23.22-7.78-48.75-5.41-70.19 6.33-21.41 11.77-37.09 32.11-43 55.8L1.9 280.37A64.218 64.218 0 0 0 0 295.86v70.25C0 429.01 51.58 480 115.2 480h37.12c60.28 0 110.37-45.94 114.88-105.37l2.93-38.63h35.75l2.93 38.63C313.31 434.06 363.4 480 423.68 480h37.12c63.62 0 115.2-50.99 115.2-113.88v-70.25c0-5.23-.64-10.43-1.9-15.5zm-370.72 89.42c-1.97 25.91-24.4 46.21-51.06 46.21H115.2C86.97 416 64 393.62 64 366.11v-37.54c18.12-6.49 43.42-12.92 72.58-12.92 23.86 0 47.26 4.33 69.93 12.92l-3.13 41.22zM512 366.12c0 27.51-22.97 49.88-51.2 49.88h-37.12c-26.67 0-49.1-20.3-51.06-46.21l-3.13-41.22c22.67-8.59 46.08-12.92 69.95-12.92 29.12 0 54.43 6.44 72.55 12.93v37.54z"></path></svg><span>文</span></a><div class="sub-menu"></div></div><div class="menu-link"><a href="/notes"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="feather-alt" class="svg-inline--fa fa-feather-alt fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 0C460.22 3.56 96.44 38.2 71.01 287.61c-3.09 26.66-4.84 53.44-5.99 80.24l178.87-178.69c6.25-6.25 16.4-6.25 22.65 0s6.25 16.38 0 22.63L7.04 471.03c-9.38 9.37-9.38 24.57 0 33.94 9.38 9.37 24.59 9.37 33.98 0l57.13-57.07c42.09-.14 84.15-2.53 125.96-7.36 53.48-5.44 97.02-26.47 132.58-56.54H255.74l146.79-48.88c11.25-14.89 21.37-30.71 30.45-47.12h-81.14l106.54-53.21C500.29 132.86 510.19 26.26 512 0z"></path></svg><span>记</span></a></div><div class="menu-link"><a href="/timeline"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="history" class="svg-inline--fa fa-history fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"></path></svg><span>览</span></a></div></nav></div><nav class="jsx-685620294 head-social"><a title="GitHub" href="https://github.com/Innei"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a title="QQ" href="https://jq.qq.com/?_wv=1027&amp;k=5t9N0mw"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="qq" class="svg-inline--fa fa-qq fa-w-14 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"></path></svg></a><a title="twitter" href="https://twitter.com/_oQuery"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://travellings.now.sh/" target="_blank" title="开往"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="route" class="svg-inline--fa fa-route fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg></a></nav></header><main class="is-article is-note post-content paul-note"><div><article><h1>2020-09-05 Sat</h1><h2 title="" style="text-align:center">剖析某运动软件api</h2><div id="write"><hr/><div class="paragraph"><span class="indent">date: 2019-03-08T03:42:00.000Z
updated: 2020-09-04T18:03:17.399Z
title: 剖析某运动软件api
slug: 剖析某运动软件api
id: 15
permalink: notes/15</span></div><h2 id="0¡type: Note"><span class="indent">type: Note</span></h2><div class="paragraph"><span class="indent">这学期学校采用某款外包公司的运动软件来强制性制定运动项目.</span></div><div class="paragraph"><span class="indent">名字我不说了.</span></div><div class="paragraph"><span class="indent">下面来剖析该软件与服务器之间的交互.分析出他的api是怎么样的</span></div><div class="paragraph"><span class="indent">安卓7以下使用packet capture进行抓包. 安卓7以上SSL通信无法正常进行.</span></div><div class="paragraph"><span class="indent">这里没图 自己抓.我把我抓到的和post出去的json解释一遍.</span></div><div class="CodeBlock_code-wrap__2WEZV"><pre style="color:black;background:var(--code-bg) !important;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span>	</span><span class="token" style="color:#905">&quot;startTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">1551860831865</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">//时间截</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>	</span><span class="token" style="color:#905">&quot;runningSportId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span>	</span><span class="token" style="color:#905">18</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 18对应快走，19对应慢跑，20对应快跑 后来通过某种方式得知 212223也对应 应该是跟学校有关 1 2 3 也是</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>	</span><span class="token" style="color:#905">&quot;studentId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span>	47xxx</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 应该是本人唯一值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span></span><span class="token" style="color:slategray">// response start</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span>	
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>	</span><span class="token" style="color:#905">&quot;id&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> 5457xx</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 后面的activity id 唯一值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>	</span><span class="token" style="color:#905">&quot;runningSportId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">18</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 快走id</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>	</span><span class="token" style="color:#905">&quot;endRunningSportId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>	</span><span class="token" style="color:#905">&quot;studentId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">47580</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>	</span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>	</span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>	</span><span class="token" style="color:#905">&quot;costTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>	</span><span class="token" style="color:#905">&quot;speed&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>	</span><span class="token" style="color:#905">&quot;stepPerSecond&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>	</span><span class="token" style="color:#905">&quot;distancePerStep&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>	</span><span class="token" style="color:#905">&quot;targetFinishedTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span><span>	</span><span class="token" style="color:#905">&quot;startTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551860832272</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 当前服务器时间截(毫秒) 13位</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span>	</span><span class="token" style="color:#905">&quot;kcalConsumed&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span><span>	</span><span class="token" style="color:#905">&quot;qualified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span>	</span><span class="token" style="color:#905">&quot;isValid&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span>	</span><span class="token" style="color:#905">&quot;isVerified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span><span>	</span><span class="token" style="color:#905">&quot;qualifiedDistance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">4000</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span>	</span><span class="token" style="color:#905">&quot;qualifiedCostTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">3360</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span>	</span><span class="token" style="color:#905">&quot;minCostTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">29</span><span>	</span><span class="token" style="color:#905">&quot;endedAt&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">30</span><span>	</span><span class="token" style="color:#905">&quot;endedBy&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">31</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">32</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">33</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">34</span><span></span><span class="token" style="color:slategray">// activitydata</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">35</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">36</span><span>	</span><span class="token" style="color:#905">&quot;distancePerStep&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">37</span><span>	</span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">38</span><span>	</span><span class="token" style="color:#905">&quot;stepCountCal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">39</span><span>	</span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120</span><span>.xxxx</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">40</span><span>	</span><span class="token" style="color:#905">&quot;activityId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">551760</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">41</span><span>	</span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27</span><span>.9xxxxx</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">//坐标</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">42</span><span>	</span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">43</span><span>	</span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">44</span><span>	</span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">45</span><span>	</span><span class="token" style="color:#905">&quot;stepPerSecond&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">46</span>	
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">47</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">48</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">49</span><span></span><span class="token" style="color:slategray">// response data</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">50</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">51</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">52</span><span>	</span><span class="token" style="color:#905">&quot;statusMsg&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;数据提交成功&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">53</span><span>	</span><span class="token" style="color:#905">&quot;obj&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">54</span><span>		</span><span class="token" style="color:#905">&quot;id&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">64822721</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// 随机值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">55</span><span>		</span><span class="token" style="color:#905">&quot;activityId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> 5457xx</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// start返回唯一值id</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">56</span><span>		</span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551860832729</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">//当前服务器时间截(毫秒) 13位</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">57</span><span>		</span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">58</span><span>		</span><span class="token" style="color:#905">&quot;stepCountCal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">59</span><span>		</span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">60</span><span>		</span><span class="token" style="color:#905">&quot;distancePerStep&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">61</span><span>		</span><span class="token" style="color:#905">&quot;stepPerSecond&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">62</span><span>		</span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.7071</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">63</span><span>		</span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.916</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">64</span><span>		</span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">65</span><span>		</span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">66</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">67</span><span>	</span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">68</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">69</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">70</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">71</span><span></span><span class="token" style="color:slategray">// end request</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">72</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">73</span><span>	</span><span class="token" style="color:#905">&quot;targetFinishedTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">74</span><span>	</span><span class="token" style="color:#905">&quot;costTime&quot;</span><span>	</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">141</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray">// 秒</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">75</span><span>	</span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span>	</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// 米</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">76</span><span>	</span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span>	</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> 
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">77</span><span>	</span><span class="token" style="color:#905">&quot;id&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">545712</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// 一次运动 唯一值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">78</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">79</span><span></span><span class="token" style="color:slategray">// response</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">80</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">81</span><span>	</span><span class="token" style="color:#905">&quot;id&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">545712</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">82</span><span>	</span><span class="token" style="color:#905">&quot;runningSportId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">18</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">83</span><span>	</span><span class="token" style="color:#905">&quot;endRunningSportId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">18</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">84</span><span>	</span><span class="token" style="color:#905">&quot;studentId&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">47580</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">85</span><span>	</span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">86</span><span>	</span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">87</span><span>	</span><span class="token" style="color:#905">&quot;costTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">141</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">88</span><span>	</span><span class="token" style="color:#905">&quot;speed&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">89</span><span>	</span><span class="token" style="color:#905">&quot;stepPerSecond&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">90</span><span>	</span><span class="token" style="color:#905">&quot;distancePerStep&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0.0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">91</span><span>	</span><span class="token" style="color:#905">&quot;targetFinishedTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">92</span><span>	</span><span class="token" style="color:#905">&quot;startTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551860832000</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">93</span><span>	</span><span class="token" style="color:#905">&quot;kcalConsumed&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">4</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">94</span><span>	</span><span class="token" style="color:#905">&quot;qualified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">95</span><span>	</span><span class="token" style="color:#905">&quot;isValid&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">96</span><span>	</span><span class="token" style="color:#905">&quot;isVerified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">97</span><span>	</span><span class="token" style="color:#905">&quot;qualifiedDistance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">4000</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">98</span><span>	</span><span class="token" style="color:#905">&quot;qualifiedCostTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">3360</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">99</span><span>	</span><span class="token" style="color:#905">&quot;minCostTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">100</span><span>	</span><span class="token" style="color:#905">&quot;endedAt&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551860975504</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">101</span><span>	</span><span class="token" style="color:#905">&quot;endedBy&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token null" style="color:#07a">null</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">102</span><span></span><span class="token" style="color:#999">}</span></code></pre><div class="CodeBlock_copy-tip__11M5z">Copy</div></div><div class="paragraph"><span class="indent">与api的交互包
</span><div style="padding:1rem 0"><div style="position:relative;max-width:100%;margin:auto"><div class="lazyload-image image-hide"></div><div class="placeholder-image" style="max-width:100%;position:absolute;background-color:#1bad84;filter:brightness(1.3);z-index:-1"></div></div></div><span class="indent">
</span><div style="padding:1rem 0"><div style="position:relative;max-width:100%;margin:auto"><div class="lazyload-image image-hide"></div><div class="placeholder-image" style="max-width:100%;position:absolute;background-color:#30cca5;filter:brightness(1.3);z-index:-1"></div></div></div></div><div class="paragraph"><span class="indent">总体过程:</span></div><div class="paragraph"><span class="indent">首先向服务器发送一个start请求,可以看到start的header里有一个Authorization: 后面是JWT加密,通过一个.前面的用base64解密 发现是sha512加密.这里估计是个bug,只要你登陆上去抓到这个Authorization就行了,而且这个不是重点,因为JWT最后一位随便改个大写字母都行.但是这个Authorization不可缺. 确定用户的唯一值是 StudentId
下面看传出的data
首先是有个id 这个id很重要决定了本次运动的id唯一值,只要没有发送end指令,就可以向服务器发送runningactivityData.</span></div><div class="paragraph"><span class="indent">然后不停的向服务器发送runningactivityData
这是什么,看看data和回传的json</span></div><div class="paragraph"><span class="indent">发现这是实时距离,步数,位置(经纬度)等等</span></div><div class="paragraph"><span class="indent">再来看看end</span></div><div class="paragraph"><span class="indent">也是这些东西,而且这些东西都可以伪造. 结果取得是end发送的结果. 也就是说前面的runningactivityData只是用来绘制路线而已, 也是判断作弊用的吧</span></div><h3 id="1¡post模拟(v1.0 .路径模拟.)"><span class="indent">post模拟(v1.0 .路径模拟.)</span></h3><div class="paragraph"><span class="indent">说干就干 用python 进行模拟</span></div><div class="CodeBlock_code-wrap__2WEZV"><pre style="color:black;background:var(--code-bg) !important;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-python" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span class="token" style="color:#07a">import</span><span> requests
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:#07a">import</span><span> time
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span></span><span class="token" style="color:#07a">import</span><span> json
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span></span><span class="token" style="color:#07a">import</span><span> random
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span></span><span class="token" style="color:#07a">from</span><span> math </span><span class="token" style="color:#07a">import</span><span> radians</span><span class="token" style="color:#999">,</span><span> cos</span><span class="token" style="color:#999">,</span><span> sin</span><span class="token" style="color:#999">,</span><span> asin</span><span class="token" style="color:#999">,</span><span> sqrt</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">pow</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>url </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;https://api.guangyangyundong.com/&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>millis </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">int</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>time</span><span class="token" style="color:#999">.</span><span>time</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> </span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 获取时间截</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>r </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> requests</span><span class="token" style="color:#999">.</span><span>session</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>start_time </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">int</span><span class="token" style="color:#999">(</span><span>time</span><span class="token" style="color:#999">.</span><span>time</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span></span><span class="token" style="color:slategray"># 全局变量</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>longitude </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">120.70645</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>latitude </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">27.917463</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>lon1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">120.70645</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>lat1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">27.917463</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>lon2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">120.70645</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>lat2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">27.917463</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>stepCount </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>targetFinishedTime </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span></span><span class="token" style="color:slategray"># start</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span><span>headers </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span>    </span><span class="token" style="color:#690">&#x27;User-Agent&#x27;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&#x27;Mozilla/5.0 (Linux; U; Android 5.1; zh-cn; MX4 Build/LMY47I) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span>    </span><span class="token" style="color:#690">&#x27;Authorization&#x27;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&#x27;&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span><span>    </span><span class="token" style="color:#690">&#x27;Content-Type&#x27;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&#x27;application/x-www-form-urlencoded&#x27;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span>data </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">29</span><span>    </span><span class="token" style="color:#690">&#x27;startTime&#x27;</span><span class="token" style="color:#999">:</span><span> millis</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">30</span><span>    </span><span class="token" style="color:#690">&#x27;runningSportId&#x27;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">20</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 跑步模式</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">31</span><span>    </span><span class="token" style="color:#690">&#x27;studentId&#x27;</span><span class="token" style="color:#999">:</span><span> xxxxx</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">32</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">33</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">34</span><span>js </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> r</span><span class="token" style="color:#999">.</span><span>post</span><span class="token" style="color:#999">(</span><span>url </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">&#x27;api/runningActivities/start&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">35</span><span>            data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>data</span><span class="token" style="color:#999">,</span><span> headers</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>headers</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span>content
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">36</span><span>js </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#999">.</span><span>loads</span><span class="token" style="color:#999">(</span><span>js</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">37</span><span></span><span class="token" style="color:#690">id</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> js</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;id&quot;</span><span class="token" style="color:#999">]</span><span>  </span><span class="token" style="color:slategray"># 获取当前运动id</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">38</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">39</span><span></span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">id</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">40</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">41</span><span></span><span class="token" style="color:slategray"># end activity</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">42</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">43</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">44</span><span></span><span class="token" style="color:#07a">def</span><span> </span><span class="token" style="color:#DD4A68">end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">45</span><span>    </span><span class="token" style="color:#07a">global</span><span> distance</span><span class="token" style="color:#999">,</span><span> targetFinishedTime</span><span class="token" style="color:#999">,</span><span> stepCount
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">46</span><span>    time</span><span class="token" style="color:#999">.</span><span>sleep</span><span class="token" style="color:#999">(</span><span>random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">3</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 模拟停止动作</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">47</span><span>    end_time </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">int</span><span class="token" style="color:#999">(</span><span>time</span><span class="token" style="color:#999">.</span><span>time</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> start_time  </span><span class="token" style="color:slategray"># 间隔时间</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">48</span><span>    end_data </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">49</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">50</span><span>        </span><span class="token" style="color:#690">&quot;targetFinishedTime&quot;</span><span class="token" style="color:#999">:</span><span> targetFinishedTime</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 预测是目标完成时间</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">51</span><span>        </span><span class="token" style="color:#690">&quot;costTime&quot;</span><span class="token" style="color:#999">:</span><span> end_time</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">52</span><span>        </span><span class="token" style="color:#690">&quot;distance&quot;</span><span class="token" style="color:#999">:</span><span> distance</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 最后一次activity的距离</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">53</span><span>        </span><span class="token" style="color:#690">&quot;stepCount&quot;</span><span class="token" style="color:#999">:</span><span> stepCount</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 步数？？</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">54</span><span>        </span><span class="token" style="color:#690">&quot;id&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">id</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">55</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">56</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">57</span><span>    end_running </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> r</span><span class="token" style="color:#999">.</span><span>post</span><span class="token" style="color:#999">(</span><span>url </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">&#x27;api/runningActivities/end&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">58</span><span>                         data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>end_data</span><span class="token" style="color:#999">,</span><span> headers</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>headers</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span>content
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">59</span><span>    end_running </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#999">.</span><span>loads</span><span class="token" style="color:#999">(</span><span>end_running</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">60</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span>end_running</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">61</span><span>    exit</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 退出</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">62</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">63</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">64</span><span></span><span class="token" style="color:#07a">def</span><span> </span><span class="token" style="color:#DD4A68">haversine</span><span class="token" style="color:#999">(</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">:</span><span>  </span><span class="token" style="color:slategray"># 经度1，纬度1，经度2，纬度2 （十进制度数）</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">65</span><span>    </span><span class="token triple-quoted-string" style="color:#690">&quot;&quot;&quot;
</span><span class="token triple-quoted-string" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">66</span>    Calculate the great circle distance between two points
</span><span class="token triple-quoted-string" style="color:#690"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">67</span>    on the earth (specified in decimal degrees)
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">68</span><span class="token triple-quoted-string" style="color:#690">    &quot;&quot;&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">69</span><span>    </span><span class="token" style="color:slategray"># 将十进制度数转化为弧度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">70</span><span>    lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">map</span><span class="token" style="color:#999">(</span><span>radians</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">71</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">72</span><span>    </span><span class="token" style="color:slategray"># haversine公式</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">73</span><span>    dlon </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lon2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> lon1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">74</span><span>    dlat </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lat2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> lat1
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">75</span><span>    a </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> sin</span><span class="token" style="color:#999">(</span><span>dlat </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">**</span><span> </span><span class="token" style="color:#905">2</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> cos</span><span class="token" style="color:#999">(</span><span>lat1</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> cos</span><span class="token" style="color:#999">(</span><span>lat2</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> sin</span><span class="token" style="color:#999">(</span><span>dlon </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">**</span><span> </span><span class="token" style="color:#905">2</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">76</span><span>    c </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">2</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> asin</span><span class="token" style="color:#999">(</span><span>sqrt</span><span class="token" style="color:#999">(</span><span>a</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">77</span><span>    r </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">6371</span><span>  </span><span class="token" style="color:slategray"># 地球平均半径，单位为公里</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">78</span><span>    </span><span class="token" style="color:#07a">return</span><span> c </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> r </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> </span><span class="token" style="color:#905">1000</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">79</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">80</span><span></span><span class="token" style="color:slategray"># running activity data post</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">81</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">82</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">83</span><span></span><span class="token" style="color:#07a">def</span><span> </span><span class="token" style="color:#DD4A68">anti_activity</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">:</span><span>  </span><span class="token" style="color:slategray"># 回走函数</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">84</span><span>    </span><span class="token" style="color:#07a">global</span><span> longitude</span><span class="token" style="color:#999">,</span><span> latitude</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon1</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> stepCount</span><span class="token" style="color:#999">,</span><span> distance</span><span class="token" style="color:#999">,</span><span> start_time</span><span class="token" style="color:#999">,</span><span> targetFinishedTime
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">85</span><span>    </span><span class="token" style="color:#07a">if</span><span> distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;=</span><span> </span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">86</span><span>        targetFinishedTime </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">int</span><span class="token" style="color:#999">(</span><span>time</span><span class="token" style="color:#999">.</span><span>time</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> start_time
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">87</span><span>        end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 1000m 结束 计算用时</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">88</span><span>        </span><span class="token" style="color:#07a">return</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">89</span><span>    rand </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">4200</span><span>   </span><span class="token" style="color:slategray"># 引入随机值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">90</span><span>    lon2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lon1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">pow</span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> \
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">91</span><span>        </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">1000000</span><span>  </span><span class="token" style="color:slategray"># 左右偏移</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">92</span><span>    lat2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lat1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> rand
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">93</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">94</span><span>    distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> haversine</span><span class="token" style="color:#999">(</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 总距离</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">95</span><span>    distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> haversine</span><span class="token" style="color:#999">(</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">96</span><span>    stepCount_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">0.6</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">97</span><span>    stepCount </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">0.6</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> stepCount</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">98</span><span>    activity_data </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">99</span><span>        </span><span class="token" style="color:slategray"># 每秒走了多少步</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">100</span><span>        </span><span class="token" style="color:#690">&quot;distancePerStep&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2.4</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">10</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">60</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">101</span><span>        </span><span class="token" style="color:#690">&quot;locationType&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 根据高德api 应返回1 为GPS定位</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">102</span><span>        </span><span class="token" style="color:#690">&quot;stepCountCal&quot;</span><span class="token" style="color:#999">:</span><span> stepCount </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">8</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 比总步数小一点 未证实</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">103</span><span>        </span><span class="token" style="color:#690">&quot;longitude&quot;</span><span class="token" style="color:#999">:</span><span> lon1</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 经纬度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">104</span><span>        </span><span class="token" style="color:#690">&quot;activityId&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">id</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># id唯一值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">105</span><span>        </span><span class="token" style="color:#690">&quot;latitude&quot;</span><span class="token" style="color:#999">:</span><span> lat1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">106</span><span>        </span><span class="token" style="color:#690">&quot;stepCount&quot;</span><span class="token" style="color:#999">:</span><span> stepCount</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 总步数</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">107</span><span>        </span><span class="token" style="color:#690">&quot;isNormal&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&#x27;true&#x27;</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 未证实</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">108</span><span>        </span><span class="token" style="color:#690">&quot;distance&quot;</span><span class="token" style="color:#999">:</span><span> distance</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 距离累加 end应返回最后一个distance</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">109</span><span>        </span><span class="token" style="color:slategray"># 平均速度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">110</span><span>        </span><span class="token" style="color:#690">&quot;stepPerSecond&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">3.5</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">200</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">111</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">112</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">113</span><span>    lon1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lon2
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">114</span><span>    lat1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lat2
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">115</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">116</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;当前经纬度&quot;</span><span class="token" style="color:#999">,</span><span> longitude</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">117</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span>latitude</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">118</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;总距离&quot;</span><span class="token" style="color:#999">,</span><span> distance</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">119</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每次位移差&quot;</span><span class="token" style="color:#999">,</span><span> distance_per</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">120</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;总步数&#x27;</span><span class="token" style="color:#999">,</span><span> stepCount</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">121</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每次步数&quot;</span><span class="token" style="color:#999">,</span><span> stepCount_per</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">122</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每秒走多少步&quot;</span><span class="token" style="color:#999">,</span><span> activity_data</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;distancePerStep&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">123</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;平均速度&quot;</span><span class="token" style="color:#999">,</span><span> activity_data</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;stepPerSecond&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">124</span><span>    log </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> r</span><span class="token" style="color:#999">.</span><span>post</span><span class="token" style="color:#999">(</span><span>url </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">&#x27;api/runningActivityData&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">125</span><span>                 headers</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>headers</span><span class="token" style="color:#999">,</span><span> data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>activity_data</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span>content
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">126</span><span>    log </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#999">.</span><span>loads</span><span class="token" style="color:#999">(</span><span>log</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">127</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span>log</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">128</span><span>    </span><span class="token" style="color:#07a">return</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">129</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">130</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">131</span><span></span><span class="token" style="color:#07a">def</span><span> </span><span class="token" style="color:#DD4A68">activity</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">132</span><span>    </span><span class="token" style="color:#07a">global</span><span> longitude</span><span class="token" style="color:#999">,</span><span> latitude</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon1</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> stepCount</span><span class="token" style="color:#999">,</span><span> distance</span><span class="token" style="color:#999">,</span><span> start_time</span><span class="token" style="color:#999">,</span><span> targetFinishedTime
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">133</span><span>    </span><span class="token" style="color:#07a">if</span><span> distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;=</span><span> </span><span class="token" style="color:#905">600</span><span class="token" style="color:#999">:</span><span>  </span><span class="token" style="color:slategray"># 如果大于630米要转弯 我觉得返回跑比较好 差不多这个点</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">134</span><span>        anti_activity</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">135</span><span>        </span><span class="token" style="color:slategray"># targetFinishedTime = int(time.time()) - start_time</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">136</span><span>        </span><span class="token" style="color:#07a">return</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">137</span><span>    rand </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">100000</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100000000</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">138</span><span>    lon2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lon1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">pow</span><span class="token" style="color:#999">(</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span> \
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">139</span><span>        </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">1000000</span><span>  </span><span class="token" style="color:slategray"># 左右偏移 # 引入随机值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">140</span><span>    lat2 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lat1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> rand
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">141</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">142</span><span>    distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>distance </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> haversine</span><span class="token" style="color:#999">(</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 总距离</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">143</span><span>    distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> haversine</span><span class="token" style="color:#999">(</span><span>lon1</span><span class="token" style="color:#999">,</span><span> lat1</span><span class="token" style="color:#999">,</span><span> lon2</span><span class="token" style="color:#999">,</span><span> lat2</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">144</span><span>    stepCount_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">0.6</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">145</span><span>    stepCount </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span>distance_per </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">0.6</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> stepCount</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">146</span><span>    activity_data </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">147</span><span>        </span><span class="token" style="color:slategray"># 每秒走了多少步</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">148</span><span>        </span><span class="token" style="color:#690">&quot;distancePerStep&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2.4</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">10</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">60</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">149</span><span>        </span><span class="token" style="color:#690">&quot;locationType&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 根据高德api 应返回1 为GPS定位</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">150</span><span>        </span><span class="token" style="color:#690">&quot;stepCountCal&quot;</span><span class="token" style="color:#999">:</span><span> stepCount </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">8</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 比总步数小一点 未证实</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">151</span><span>        </span><span class="token" style="color:#690">&quot;longitude&quot;</span><span class="token" style="color:#999">:</span><span> lon1</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 经纬度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">152</span><span>        </span><span class="token" style="color:#690">&quot;activityId&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">id</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># id唯一值</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">153</span><span>        </span><span class="token" style="color:#690">&quot;latitude&quot;</span><span class="token" style="color:#999">:</span><span> lat1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">154</span><span>        </span><span class="token" style="color:#690">&quot;stepCount&quot;</span><span class="token" style="color:#999">:</span><span> stepCount</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 总步数</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">155</span><span>        </span><span class="token" style="color:#690">&quot;isNormal&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">&#x27;true&#x27;</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 未证实</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">156</span><span>        </span><span class="token" style="color:#690">&quot;distance&quot;</span><span class="token" style="color:#999">:</span><span> distance</span><span class="token" style="color:#999">,</span><span>  </span><span class="token" style="color:slategray"># 距离累加 end应返回最后一个distance</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">157</span><span>        </span><span class="token" style="color:slategray"># 平均速度</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">158</span><span>        </span><span class="token" style="color:#690">&quot;stepPerSecond&quot;</span><span class="token" style="color:#999">:</span><span> </span><span class="token" style="color:#690">round</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">3.5</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">-</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">200</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">159</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">160</span><span>    lon1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lon2
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">161</span><span>    lat1 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> lat2
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">162</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;当前经纬度&quot;</span><span class="token" style="color:#999">,</span><span> longitude</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">163</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span>latitude</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">164</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;总距离&quot;</span><span class="token" style="color:#999">,</span><span> distance</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">165</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每次位移差&quot;</span><span class="token" style="color:#999">,</span><span> distance_per</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">166</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;总步数&#x27;</span><span class="token" style="color:#999">,</span><span> stepCount</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">167</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每次步数&quot;</span><span class="token" style="color:#999">,</span><span> stepCount_per</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">168</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;每秒走多少步&quot;</span><span class="token" style="color:#999">,</span><span> activity_data</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;distancePerStep&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">169</span><span>    log </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> r</span><span class="token" style="color:#999">.</span><span>post</span><span class="token" style="color:#999">(</span><span>url </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#690">&#x27;api/runningActivityData&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">170</span><span>                 headers</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>headers</span><span class="token" style="color:#999">,</span><span> data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>activity_data</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span>content
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">171</span><span>    log </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> json</span><span class="token" style="color:#999">.</span><span>loads</span><span class="token" style="color:#999">(</span><span>log</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">172</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span>log</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">173</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">174</span>
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">175</span><span>n </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">176</span><span></span><span class="token" style="color:#07a">while</span><span> n </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span> </span><span class="token" style="color:#905">90</span><span class="token" style="color:#999">:</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">177</span><span>    activity</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">178</span><span>    n </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> n </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">1</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">179</span><span>    rand_time </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> random</span><span class="token" style="color:#999">.</span><span>randint</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">300</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#905">400</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span> </span><span class="token" style="color:#905">100</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">180</span><span>    </span><span class="token" style="color:#07a">print</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;sleep &#x27;</span><span class="token" style="color:#999">,</span><span> rand_time</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&#x27; s\n&#x27;</span><span class="token" style="color:#999">)</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">181</span><span>    time</span><span class="token" style="color:#999">.</span><span>sleep</span><span class="token" style="color:#999">(</span><span>rand_time</span><span class="token" style="color:#999">)</span><span>  </span><span class="token" style="color:slategray"># 睡眠然后再次提交数据</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:4em;padding-right:1em;text-align:right;user-select:none;color:slategray">182</span><span>end</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span></code></pre><div class="CodeBlock_copy-tip__11M5z">Copy</div></div><div class="paragraph"><div style="padding:1rem 0"><div style="position:relative;max-width:100%;margin:auto"><div class="lazyload-image image-hide"></div><div class="placeholder-image" style="max-width:100%;position:absolute;background-color:#ff26ff;filter:brightness(1.3);z-index:-1"></div></div></div></div><div class="paragraph"><span class="indent">希望有大佬可以进行完善,等等我会在github开源 希望有交流讨论</span></div><h4 id="2¡后续研究"><span class="indent">后续研究</span></h4><div class="paragraph"><span class="indent">该api存在严重漏洞.
比如可以根据studentId获取到任意学生的运动数据,不需要传入header.
然后根据id能获取每次运动路径
比如</span></div><div class="CodeBlock_code-wrap__2WEZV"><pre style="color:black;background:var(--code-bg) !important;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">1</span><span>id = </span><span class="token" style="color:#905">544237</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">2</span><span></span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">3</span><span>  </span><span class="token" style="color:#905">&quot;errors&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">4</span><span>  </span><span class="token" style="color:#905">&quot;data&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">5</span><span>    </span><span class="token" style="color:#905">&quot;runningActivity&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">6</span><span>      </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1711</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">7</span><span>      </span><span class="token" style="color:#905">&quot;costTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">2312</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">8</span><span>      </span><span class="token" style="color:#905">&quot;endedAt&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551893421000</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">9</span><span>      </span><span class="token" style="color:#905">&quot;qualifiedDistance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">800</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">10</span><span>      </span><span class="token" style="color:#905">&quot;qualifiedCostTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">300</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">11</span><span>      </span><span class="token" style="color:#905">&quot;kcalConsumed&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">387</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">12</span><span>      </span><span class="token" style="color:#905">&quot;qualified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">13</span><span>      </span><span class="token" style="color:#905">&quot;isValid&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">14</span><span>      </span><span class="token" style="color:#905">&quot;isVerified&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">15</span><span>      </span><span class="token" style="color:#905">&quot;runningSport&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">16</span><span>        </span><span class="token" style="color:#905">&quot;name&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;快跑&quot;</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">17</span><span>      </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">18</span><span>      </span><span class="token" style="color:#905">&quot;data&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">19</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">20</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.701575</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">21</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.921444</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">22</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">23</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">24</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">25</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">26</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850108</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">27</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">28</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">29</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.70023546006945</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">30</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.91632161458333</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">31</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">32</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">33</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">34</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">35</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850112</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">36</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">37</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">38</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.70006863064236</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">39</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.91600802951389</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">40</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">41</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">42</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">43</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">38</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">44</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850116</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">45</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">46</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">47</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.6999134657118</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">48</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.915694444444444</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">49</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">50</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">51</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">52</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">76</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">53</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850120</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">54</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">55</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">56</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.69976318359375</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">57</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.91541232638889</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">58</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">59</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">60</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">61</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">110</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">62</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850124</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">63</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">64</span><span>        </span><span class="token" style="color:#999">{</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">65</span><span>          </span><span class="token" style="color:#905">&quot;longitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">120.69963433159722</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">66</span><span>          </span><span class="token" style="color:#905">&quot;latitude&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">27.915142415364585</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">67</span><span>          </span><span class="token" style="color:#905">&quot;isNormal&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">68</span><span>          </span><span class="token" style="color:#905">&quot;locationType&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">69</span><span>          </span><span class="token" style="color:#905">&quot;stepCount&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">70</span><span>          </span><span class="token" style="color:#905">&quot;distance&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">142</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">71</span><span>          </span><span class="token" style="color:#905">&quot;acquisitionTime&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">1551850128</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">72</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">73</span>		
<span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:slategray">74</span>		......
</code></pre><div class="CodeBlock_copy-tip__11M5z">Copy</div></div><div class="paragraph"><span class="indent">当然其他学校数据也能看. 同理</span></div></div><div class="note-inform"><span><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user" class="svg-inline--fa fa-user fa-w-14 Action_icon__3BtwG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></svg>Innei</span><span><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" class="svg-inline--fa fa-clock fa-w-16 Action_icon__3BtwG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"></path></svg>7 分钟前</span><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" style="color:currentColor" target="_blank"><span title="创作共用保留署名-非商业-禁止演绎4.0国际许可证"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="creative-commons" class="svg-inline--fa fa-creative-commons fa-w-16 Action_icon__3BtwG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"></path></svg></span></a></div><div class="note-action" style="min-height:1rem"></div><section class="paul-more"><button class="btn green">后一篇</button><button class="btn yellow">时间线</button><button class="btn green">前一篇</button></section></article></div></main><footer class="jsx-2343023712"><div class="jsx-2343023712 wrap"><div class="jsx-2343023712 row"><div class="jsx-2343023712 col-m-6 left to-center"><p class="jsx-2343023712">© <!-- -->2020<!-- --> <a href="https://innei.ren" target="_blank" class="jsx-2343023712">Innei</a>.<!-- --> <span title="Stay hungry. Stay foolish. -- Steve Jobs" class="jsx-2343023712">Stay hungry. Stay foolish.</span></p><p class="jsx-2343023712">Powered by<!-- --> <a href="https://github.com/Innei/candy" class="jsx-2343023712"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="candy-cane" class="svg-inline--fa fa-candy-cane fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M497.5 92C469.6 33.1 411.8 0 352.4 0c-27.9 0-56.2 7.3-81.8 22.6L243.1 39c-15.2 9.1-20.1 28.7-11 43.9l32.8 54.9c6 10 16.6 15.6 27.5 15.6 5.6 0 11.2-1.5 16.4-4.5l27.5-16.4c5.1-3.1 10.8-4.5 16.4-4.5 10.9 0 21.5 5.6 27.5 15.6 9.1 15.1 4.1 34.8-11 43.9L15.6 397.6c-15.2 9.1-20.1 28.7-11 43.9l32.8 54.9c6 10 16.6 15.6 27.5 15.6 5.6 0 11.2-1.5 16.4-4.5L428.6 301c71.7-42.9 104.6-133.5 68.9-209zm-177.7 13l-2.5 1.5L296.8 45c9.7-4.7 19.8-8.1 30.3-10.2l20.6 61.8c-9.8.8-19.4 3.3-27.9 8.4zM145.9 431.8l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zm107.5-63.9l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zM364.3 302l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zm20.4-197.3l46-46c8.4 6.5 16 14.1 22.6 22.6L407.6 127c-5.7-9.3-13.7-16.9-22.9-22.3zm82.1 107.8l-59.5-19.8c3.2-5.3 5.8-10.9 7.4-17.1 1.1-4.5 1.7-9.1 1.8-13.6l60.4 20.1c-2.1 10.4-5.5 20.6-10.1 30.4z"></path></svg> Candy </a><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noreferrer" class="jsx-2343023712"> </a></p></div><div class="jsx-2343023712 col-m-6 right to-center"><p style="margin-right:3rem" class="jsx-2343023712"><a class="jsx-2343023712" href="/about">关于</a>·<a class="jsx-2343023712" href="/message">留言</a>·<a class="jsx-2343023712" href="/friends">友链</a>·<a href="/feed" target="_blank" class="jsx-2343023712">RSS 订阅</a>·<a href="/sitemap.xml" target="_blank" class="jsx-2343023712">站点地图</a>·<a href="https://travellings.now.sh/" target="_blank" class="jsx-2343023712">开往</a></p></div></div></div></footer><div class="LampSwitch_select-container__3MBoO"><div class="LampSwitch_select-line__3o6J4"><div class="LampSwitch_line__3dNQQ"></div></div><div class="LampSwitch_sakura-wrap__xPAGJ"><div class="LampSwitch_sakura-img__3BGwE"></div></div></div></div><div class="jsx-1525261419 loader"><svg width="200px" height="200px" viewBox="0 0 200 200" version="1.1"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="candy" fill="#FFFFFF" fill-rule="nonzero"><path d="M194.332122,35.8674464 C183.43329,12.9044834 160.854348,0 137.650383,0 C126.751551,0 115.696464,2.8460039 105.696102,8.81091618 L94.9535254,15.2046784 C89.0158106,18.7524366 87.1016788,26.3937622 90.6564949,32.3196881 L103.469459,53.7231969 C105.813293,57.6218324 109.954068,59.8050682 114.212035,59.8050682 C116.399614,59.8050682 118.587193,59.2202729 120.618517,58.0506823 L131.361093,51.6569201 C133.353353,50.4483431 135.579996,49.9025341 137.767575,49.9025341 C142.025541,49.9025341 146.166316,52.08577 148.510151,55.9844055 C152.064967,61.871345 150.111772,69.5516569 144.213121,73.0994152 L6.08312182,155.009747 C0.145406945,158.557505 -1.76872483,166.19883 1.78609132,172.124756 L14.599055,193.528265 C16.9428898,197.426901 21.0836647,199.610136 25.3416313,199.610136 C27.5292104,199.610136 29.7167896,199.025341 31.7481131,197.85575 L167.417085,117.348928 C195.425911,100.623782 208.277939,65.3021442 194.332122,35.8674464 Z M124.915547,40.9356725 L123.938949,41.5204678 L115.930847,17.5438596 C119.720047,15.711501 123.665502,14.3859649 127.767213,13.5672515 L135.814379,37.6608187 C131.986116,37.9727096 128.23598,38.9473684 124.915547,40.9356725 L124.915547,40.9356725 Z M56.9834013,168.34308 L33.3497336,153.333333 L45.381419,146.19883 L69.0150868,161.208577 L56.9834013,168.34308 L56.9834013,168.34308 Z M98.9771086,143.430799 L75.3434408,128.421053 L87.3751262,121.28655 L111.008794,136.296296 L98.9771086,143.430799 L98.9771086,143.430799 Z M142.298989,117.738791 L118.665321,102.729045 L130.697006,95.5945419 L154.330674,110.604288 L142.298989,117.738791 Z M150.268027,40.8187135 L168.237428,22.8849903 C171.518796,25.4191033 174.487654,28.3820663 177.065872,31.6959064 L159.213663,49.5126706 C156.98702,45.8869396 153.861907,42.9239766 150.268027,40.8187135 L150.268027,40.8187135 Z M182.3395,82.8460039 L159.096472,75.1267057 C160.346517,73.0604288 161.362179,70.877193 161.987201,68.460039 C162.416904,66.705653 162.651288,64.9122807 162.690352,63.1578947 L186.284956,70.994152 C185.464613,75.0487329 184.13644,79.0253411 182.3395,82.8460039 L182.3395,82.8460039 Z" id="Shape"></path></g></g></svg></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="anonymous">{"props":{"pageProps":{"title":"剖析某运动软件api","nid":33,"created":"2020-09-05T11:07:21.263Z","modified":"2020-09-05T11:06:28.000Z","content":"---\ndate: 2019-03-08T03:42:00.000Z\nupdated: 2020-09-04T18:03:17.399Z\ntitle: 剖析某运动软件api\nslug: 剖析某运动软件api\nid: 15\npermalink: notes/15\ntype: Note\n---\n\n这学期学校采用某款外包公司的运动软件来强制性制定运动项目.\r\n\r\n名字我不说了.\r\n\r\n下面来剖析该软件与服务器之间的交互.分析出他的api是怎么样的\r\n\r\n安卓7以下使用packet capture进行抓包. 安卓7以上SSL通信无法正常进行.\r\n\r\n这里没图 自己抓.我把我抓到的和post出去的json解释一遍.\r\n\r\n```json\r\n{\r\n\t\"startTime\":1551860831865,  //时间截\r\n\t\"runningSportId\":\t18,  // 18对应快走，19对应慢跑，20对应快跑 后来通过某种方式得知 212223也对应 应该是跟学校有关 1 2 3 也是\r\n\t\"studentId\":\t47xxx,  // 应该是本人唯一值\r\n}\r\n\r\n// response start\r\n{\r\n\t\r\n\t\"id\": 5457xx,  // 后面的activity id 唯一值\r\n\t\"runningSportId\": 18,  // 快走id\r\n\t\"endRunningSportId\": null,\r\n\t\"studentId\": 47580,\r\n\t\"distance\": null,\r\n\t\"stepCount\": null,\r\n\t\"costTime\": null,\r\n\t\"speed\": null,\r\n\t\"stepPerSecond\": null,\r\n\t\"distancePerStep\": null,\r\n\t\"targetFinishedTime\": null,\r\n\t\"startTime\": 1551860832272,  // 当前服务器时间截(毫秒) 13位\r\n\t\"kcalConsumed\": null,\r\n\t\"qualified\": null,\r\n\t\"isValid\": null,\r\n\t\"isVerified\": null,\r\n\t\"qualifiedDistance\": 4000,\r\n\t\"qualifiedCostTime\": 3360,\r\n\t\"minCostTime\": null,\r\n\t\"endedAt\": null,\r\n\t\"endedBy\": null\r\n\r\n}\r\n\r\n// activitydata\r\n{\r\n\t\"distancePerStep\": 0.0,\r\n\t\"locationType\": 2,\r\n\t\"stepCountCal\": 0,\r\n\t\"longitude\": 120.xxxx,\r\n\t\"activityId\": 551760,\r\n\t\"latitude\": 27.9xxxxx, //坐标\r\n\t\"stepCount\": 0,\r\n\t\"isNormal\": true,\r\n\t\"distance\": 0,\r\n\t\"stepPerSecond\": 0.0,\r\n\t\r\n}\r\n\r\n// response data\r\n{\r\n\r\n\t\"statusMsg\": \"数据提交成功\",\r\n\t\"obj\": {\r\n\t\t\"id\": 64822721, // 随机值\r\n\t\t\"activityId\": 5457xx, // start返回唯一值id\r\n\t\t\"acquisitionTime\": 1551860832729, //当前服务器时间截(毫秒) 13位\r\n\t\t\"stepCount\": 0,\r\n\t\t\"stepCountCal\": 0,\r\n\t\t\"distance\": 0,\r\n\t\t\"distancePerStep\": 0.0,\r\n\t\t\"stepPerSecond\": 0.0,\r\n\t\t\"longitude\": 120.7071,\r\n\t\t\"latitude\": 27.916,\r\n\t\t\"locationType\": 4,\r\n\t\t\"isNormal\": true\r\n\r\n\t}\r\n}\r\n\r\n\r\n// end request\r\n{\r\n\t\"targetFinishedTime\":0,\r\n\t\"costTime\"\t:141,  // 秒\r\n\t\"distance\":\t0, // 米\r\n\t\"stepCount\"\t:0, \r\n\t\"id\":545712, // 一次运动 唯一值\r\n}\r\n// response\r\n{\r\n\t\"id\": 545712,\r\n\t\"runningSportId\": 18,\r\n\t\"endRunningSportId\": 18,\r\n\t\"studentId\": 47580,\r\n\t\"distance\": 0,\r\n\t\"stepCount\": 0,\r\n\t\"costTime\": 141,\r\n\t\"speed\": 0.0,\r\n\t\"stepPerSecond\": 0.0,\r\n\t\"distancePerStep\": 0.0,\r\n\t\"targetFinishedTime\": 0,\r\n\t\"startTime\": 1551860832000,\r\n\t\"kcalConsumed\": 4,\r\n\t\"qualified\": false,\r\n\t\"isValid\": true,\r\n\t\"isVerified\": false,\r\n\t\"qualifiedDistance\": 4000,\r\n\t\"qualifiedCostTime\": 3360,\r\n\t\"minCostTime\": 0,\r\n\t\"endedAt\": 1551860975504,\r\n\t\"endedBy\": null\r\n}\r\n```\r\n\r\n与api的交互包\r\n![](https://ws2.sinaimg.cn/large/006tKfTcgy1g0v831u966j30s40nhnb2.jpg)\r\n![](https://ws3.sinaimg.cn/large/006tKfTcgy1g0v8m3pwukj30s40nh4ci.jpg)\r\n\r\n总体过程:\r\n\r\n首先向服务器发送一个start请求,可以看到start的header里有一个Authorization: 后面是JWT加密,通过一个.前面的用base64解密 发现是sha512加密.这里估计是个bug,只要你登陆上去抓到这个Authorization就行了,而且这个不是重点,因为JWT最后一位随便改个大写字母都行.但是这个Authorization不可缺. 确定用户的唯一值是 StudentId\r\n下面看传出的data\r\n首先是有个id 这个id很重要决定了本次运动的id唯一值,只要没有发送end指令,就可以向服务器发送runningactivityData.\r\n\r\n然后不停的向服务器发送runningactivityData\r\n这是什么,看看data和回传的json\r\n\r\n发现这是实时距离,步数,位置(经纬度)等等\r\n\r\n再来看看end\r\n\r\n也是这些东西,而且这些东西都可以伪造. 结果取得是end发送的结果. 也就是说前面的runningactivityData只是用来绘制路线而已, 也是判断作弊用的吧\r\n\r\n### post模拟(v1.0 .路径模拟.)\r\n\r\n说干就干 用python 进行模拟\r\n```python\r\nimport requests\r\nimport time\r\nimport json\r\nimport random\r\nfrom math import radians, cos, sin, asin, sqrt, pow\r\nurl = 'https://api.guangyangyundong.com/'\r\nmillis = int(round(time.time() * 1000))  # 获取时间截\r\nr = requests.session()\r\nstart_time = int(time.time())\r\n\r\n# 全局变量\r\ndistance = 0\r\nlongitude = 120.70645\r\nlatitude = 27.917463\r\nlon1 = 120.70645\r\nlat1 = 27.917463\r\nlon2 = 120.70645\r\nlat2 = 27.917463\r\nstepCount = 0\r\ntargetFinishedTime = 0\r\n\r\n# start\r\nheaders = {\r\n    'User-Agent': 'Mozilla/5.0 (Linux; U; Android 5.1; zh-cn; MX4 Build/LMY47I) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36',\r\n    'Authorization': '',\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n}\r\ndata = {\r\n    'startTime': millis,\r\n    'runningSportId': 20,  # 跑步模式\r\n    'studentId': xxxxx,\r\n}\r\n\r\njs = r.post(url + 'api/runningActivities/start',\r\n            data=data, headers=headers).content\r\njs = json.loads(js)\r\nid = js[\"id\"]  # 获取当前运动id\r\n\r\nprint(id)\r\n\r\n# end activity\r\n\r\n\r\ndef end():\r\n    global distance, targetFinishedTime, stepCount\r\n    time.sleep(random.randint(2, 3))  # 模拟停止动作\r\n    end_time = int(time.time()) - start_time  # 间隔时间\r\n    end_data = {\r\n\r\n        \"targetFinishedTime\": targetFinishedTime,  # 预测是目标完成时间\r\n        \"costTime\": end_time,\r\n        \"distance\": distance,  # 最后一次activity的距离\r\n        \"stepCount\": stepCount,  # 步数？？\r\n        \"id\": id,\r\n    }\r\n\r\n    end_running = r.post(url + 'api/runningActivities/end',\r\n                         data=end_data, headers=headers).content\r\n    end_running = json.loads(end_running)\r\n    print(end_running)\r\n    exit(0)  # 退出\r\n\r\n\r\ndef haversine(lon1, lat1, lon2, lat2):  # 经度1，纬度1，经度2，纬度2 （十进制度数）\r\n    \"\"\"\r\n    Calculate the great circle distance between two points\r\n    on the earth (specified in decimal degrees)\r\n    \"\"\"\r\n    # 将十进制度数转化为弧度\r\n    lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2])\r\n\r\n    # haversine公式\r\n    dlon = lon2 - lon1\r\n    dlat = lat2 - lat1\r\n    a = sin(dlat / 2) ** 2 + cos(lat1) * cos(lat2) * sin(dlon / 2) ** 2\r\n    c = 2 * asin(sqrt(a))\r\n    r = 6371  # 地球平均半径，单位为公里\r\n    return c * r * 1000\r\n\r\n# running activity data post\r\n\r\n\r\ndef anti_activity():  # 回走函数\r\n    global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime\r\n    if distance \u003e= 1000:\r\n        targetFinishedTime = int(time.time()) - start_time\r\n        end()  # 1000m 结束 计算用时\r\n        return\r\n    rand = round(random.randint(1, 100) / 100) / 4200   # 引入随机值\r\n    lon2 = lon1 + pow(-1, random.randint(0, 1)) * \\\r\n        round(random.randint(1, 100) / 100) / 1000000  # 左右偏移\r\n    lat2 = lat1 - rand\r\n\r\n    distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离\r\n    distance_per = haversine(lon1, lat1, lon2, lat2)\r\n    stepCount_per = distance_per / 0.6\r\n    stepCount = round(distance_per / 0.6 + stepCount)\r\n    activity_data = {\r\n        # 每秒走了多少步\r\n        \"distancePerStep\": round(2.4 - random.randint(10, 60) / 100, 1),\r\n        \"locationType\": 1,  # 根据高德api 应返回1 为GPS定位\r\n        \"stepCountCal\": stepCount - random.randint(2, 8),  # 比总步数小一点 未证实\r\n        \"longitude\": lon1,  # 经纬度\r\n        \"activityId\": id,  # id唯一值\r\n        \"latitude\": lat1,\r\n        \"stepCount\": stepCount,  # 总步数\r\n        \"isNormal\": 'true',  # 未证实\r\n        \"distance\": distance,  # 距离累加 end应返回最后一个distance\r\n        # 平均速度\r\n        \"stepPerSecond\": round(3.5 - random.randint(100, 200) / 1000, 1),\r\n    }\r\n\r\n    lon1 = lon2\r\n    lat1 = lat2\r\n\r\n    print(\"当前经纬度\", longitude)\r\n    print(latitude)\r\n    print(\"总距离\", distance)\r\n    print(\"每次位移差\", distance_per)\r\n    print('总步数', stepCount)\r\n    print(\"每次步数\", stepCount_per)\r\n    print(\"每秒走多少步\", activity_data[\"distancePerStep\"])\r\n    print(\"平均速度\", activity_data[\"stepPerSecond\"])\r\n    log = r.post(url + 'api/runningActivityData',\r\n                 headers=headers, data=activity_data).content\r\n    log = json.loads(log)\r\n    print(log)\r\n    return\r\n\r\n\r\ndef activity():\r\n    global longitude, latitude, lat1, lon1, lat2, lon2, stepCount, distance, start_time, targetFinishedTime\r\n    if distance \u003e= 600:  # 如果大于630米要转弯 我觉得返回跑比较好 差不多这个点\r\n        anti_activity()\r\n        # targetFinishedTime = int(time.time()) - start_time\r\n        return\r\n    rand = random.randint(1, 100000) / 100000000\r\n    lon2 = lon1 + pow(-1, random.randint(0, 1)) * \\\r\n        round(random.randint(1, 100) / 100) / 1000000  # 左右偏移 # 引入随机值\r\n    lat2 = lat1 + rand\r\n\r\n    distance = round(distance + haversine(lon1, lat1, lon2, lat2))  # 总距离\r\n    distance_per = haversine(lon1, lat1, lon2, lat2)\r\n    stepCount_per = distance_per / 0.6\r\n    stepCount = round(distance_per / 0.6 + stepCount)\r\n    activity_data = {\r\n        # 每秒走了多少步\r\n        \"distancePerStep\": round(2.4 - random.randint(10, 60) / 100, 1),\r\n        \"locationType\": 1,  # 根据高德api 应返回1 为GPS定位\r\n        \"stepCountCal\": stepCount - random.randint(2, 8),  # 比总步数小一点 未证实\r\n        \"longitude\": lon1,  # 经纬度\r\n        \"activityId\": id,  # id唯一值\r\n        \"latitude\": lat1,\r\n        \"stepCount\": stepCount,  # 总步数\r\n        \"isNormal\": 'true',  # 未证实\r\n        \"distance\": distance,  # 距离累加 end应返回最后一个distance\r\n        # 平均速度\r\n        \"stepPerSecond\": round(3.5 - random.randint(100, 200) / 1000, 1),\r\n    }\r\n    lon1 = lon2\r\n    lat1 = lat2\r\n    print(\"当前经纬度\", longitude)\r\n    print(latitude)\r\n    print(\"总距离\", distance)\r\n    print(\"每次位移差\", distance_per)\r\n    print('总步数', stepCount)\r\n    print(\"每次步数\", stepCount_per)\r\n    print(\"每秒走多少步\", activity_data[\"distancePerStep\"])\r\n    log = r.post(url + 'api/runningActivityData',\r\n                 headers=headers, data=activity_data).content\r\n    log = json.loads(log)\r\n    print(log)\r\n\r\n\r\nn = 0\r\nwhile n \u003c 90:\r\n    activity()\r\n    n = n + 1\r\n    rand_time = random.randint(300, 400) / 100\r\n    print('sleep ', rand_time, ' s\\n')\r\n    time.sleep(rand_time)  # 睡眠然后再次提交数据\r\nend()\r\n\r\n```\r\n\r\n![](https://ws3.sinaimg.cn/large/006tKfTcly1g0wpzstbrxj30sf0gnwlw.jpg)\r\n\r\n希望有大佬可以进行完善,等等我会在github开源 希望有交流讨论\r\n\r\n#### 后续研究\r\n\r\n该api存在严重漏洞.\r\n比如可以根据studentId获取到任意学生的运动数据,不需要传入header.\r\n然后根据id能获取每次运动路径\r\n比如\r\n```json\r\nid = 544237\r\n{\r\n  \"errors\": [],\r\n  \"data\": {\r\n    \"runningActivity\": {\r\n      \"distance\": 1711,\r\n      \"costTime\": 2312,\r\n      \"endedAt\": 1551893421000,\r\n      \"qualifiedDistance\": 800,\r\n      \"qualifiedCostTime\": 300,\r\n      \"kcalConsumed\": 387,\r\n      \"qualified\": false,\r\n      \"isValid\": true,\r\n      \"isVerified\": true,\r\n      \"runningSport\": {\r\n        \"name\": \"快跑\"\r\n      },\r\n      \"data\": [\r\n        {\r\n          \"longitude\": 120.701575,\r\n          \"latitude\": 27.921444,\r\n          \"isNormal\": true,\r\n          \"locationType\": 5,\r\n          \"stepCount\": 0,\r\n          \"distance\": 0,\r\n          \"acquisitionTime\": 1551850108\r\n        },\r\n        {\r\n          \"longitude\": 120.70023546006945,\r\n          \"latitude\": 27.91632161458333,\r\n          \"isNormal\": false,\r\n          \"locationType\": 1,\r\n          \"stepCount\": 0,\r\n          \"distance\": 0,\r\n          \"acquisitionTime\": 1551850112\r\n        },\r\n        {\r\n          \"longitude\": 120.70006863064236,\r\n          \"latitude\": 27.91600802951389,\r\n          \"isNormal\": true,\r\n          \"locationType\": 1,\r\n          \"stepCount\": 1,\r\n          \"distance\": 38,\r\n          \"acquisitionTime\": 1551850116\r\n        },\r\n        {\r\n          \"longitude\": 120.6999134657118,\r\n          \"latitude\": 27.915694444444444,\r\n          \"isNormal\": true,\r\n          \"locationType\": 1,\r\n          \"stepCount\": 1,\r\n          \"distance\": 76,\r\n          \"acquisitionTime\": 1551850120\r\n        },\r\n        {\r\n          \"longitude\": 120.69976318359375,\r\n          \"latitude\": 27.91541232638889,\r\n          \"isNormal\": true,\r\n          \"locationType\": 1,\r\n          \"stepCount\": 1,\r\n          \"distance\": 110,\r\n          \"acquisitionTime\": 1551850124\r\n        },\r\n        {\r\n          \"longitude\": 120.69963433159722,\r\n          \"latitude\": 27.915142415364585,\r\n          \"isNormal\": true,\r\n          \"locationType\": 1,\r\n          \"stepCount\": 1,\r\n          \"distance\": 142,\r\n          \"acquisitionTime\": 1551850128\r\n        },\r\n\t\t\r\n\t\t......\r\n```\r\n当然其他学校数据也能看. 同理","mood":"","weather":"","hasNext":true,"hasPrev":true},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"33"},"buildId":"IfdYn_Zw96spq614z-MXP","nextExport":false,"isFallback":false,"dynamicIds":["JX7q","P3uN","QFtp","QLaP"],"gsp":true}</script><script crossorigin="anonymous" nomodule="">!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()},!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script><script crossorigin="anonymous" nomodule="" src="/_next/static/chunks/polyfills-7e33d56cf00e240514e7.js"></script><script async="" src="/_next/static/chunks/29.157100ca69ea20a3fa43.js" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/main-ac531572446c87efc95a.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/main-d25c3a68f8467af5ab28.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/webpack-dafa5baad36755870aad.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/webpack-9076e9871007db0403b2.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/framework.aa400efa16f23e2b0cfe.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/framework.aa400efa16f23e2b0cfe.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/cb1608f2.df9c02bdeedf5175f4f8.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/cb1608f2.df9c02bdeedf5175f4f8.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/a9a7754c.f3b978835b3ded362691.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/a9a7754c.f3b978835b3ded362691.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/8313d723.a205bf63c608c0f1242c.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/8313d723.a205bf63c608c0f1242c.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/commons.2fa5ada492a37cb971b8.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/commons.218023d92b657c8d646e.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/d8ec773c9d2418ede6b24e343533277017806d20.5c8e50744ba69878887c.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/d8ec773c9d2418ede6b24e343533277017806d20.2027cc3a1671d3e5bebd.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/e16c35cca568c5c1c1120369807cb65d54c417fb.8ddd0604600efb000bba.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/e16c35cca568c5c1c1120369807cb65d54c417fb.5fafcf9a83652cc0414f.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/34bc5cdf634bd0df45330a36433f02ce9393621f.11599b5c316abcc06783.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/34bc5cdf634bd0df45330a36433f02ce9393621f.59d552af12b4825ec2ac.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/e9c859f95a3c7a77a91061f0462124ba9996dc37.8750f2d49bdc93bad520.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/e9c859f95a3c7a77a91061f0462124ba9996dc37.761ef6b9b60c2525eaac.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/47560dcdbf5764f7e81ae9e8c3ac154829f9a224.7a7848fdef4b7fa486f3.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/47560dcdbf5764f7e81ae9e8c3ac154829f9a224.7a7848fdef4b7fa486f3.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/bcbc274c75a7167519c9fd119420b18d997fe2ff.d3ce1be4818213eeb138.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/bcbc274c75a7167519c9fd119420b18d997fe2ff.f2b256987406b58a7905.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/71247caf95475e3ea7f9a0f8a30beb258b23d005.fda0a659e9b7ef912e2a.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/71247caf95475e3ea7f9a0f8a30beb258b23d005.71aab1d7f57017e520dd.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/pages/_app-ec7804b3a99c25a2f1cc.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/pages/_app-ea4e8133a1256b82b929.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/5875668848b312b64d8db1d1f2167c5d595caeb3.264115b3eafff5e327c9.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/5875668848b312b64d8db1d1f2167c5d595caeb3.264115b3eafff5e327c9.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/a87edcd543411bc1f9e6ec6d695b8d3cee4671e7.be3de0cadb2da57baaa2.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/a87edcd543411bc1f9e6ec6d695b8d3cee4671e7.be3de0cadb2da57baaa2.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/c441d36c50190ad41d2c3326fa2cd28c2c74d7c2.ee67901779490a623c3e.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/c441d36c50190ad41d2c3326fa2cd28c2c74d7c2.b212de07c7bbaa8e7d53.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/23e05689de3ef9ea8c6f6ad01474d620bb59d30a.68d3ffe31d98b857230e.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/23e05689de3ef9ea8c6f6ad01474d620bb59d30a.76f9b523919fa950fbac.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-7be47904ba760039bcbb.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-85b8ed3b7a97f58b7a3f.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/IfdYn_Zw96spq614z-MXP/_buildManifest.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/IfdYn_Zw96spq614z-MXP/_buildManifest.module.js" async="" crossorigin="anonymous" type="module"></script><script src="/_next/static/IfdYn_Zw96spq614z-MXP/_ssgManifest.js" async="" crossorigin="anonymous" nomodule=""></script><script src="/_next/static/IfdYn_Zw96spq614z-MXP/_ssgManifest.module.js" async="" crossorigin="anonymous" type="module"></script><script src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script>new SmoothScroll('a[href*="#"]', {
                            speed: 500,
                            offset: 150,
                            easing: 'easeInOutCubic',
                            durationMax: 1000,
                            durationMin: 350,
                            topOnEmptyHash: true,
                            emitEvents: false,
                            updateURL: false,
                            popstate: false
                          })</script></body></html>